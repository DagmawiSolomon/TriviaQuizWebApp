<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--====styling=====-->
    <link rel="stylesheet" href="{% static 'css/statistics.css' %}">
    <!--===Poppins===-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <!--======Boxicons======-->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <title>Quiz web app</title>
</head>
<body>
    <header>
        <nav class="nav">
            <ul>
                <li><a href="{% url 'home' %}" class="nav__logo">Logo</a></li>
            </ul>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">

                    {% if request.user.is_authenticated %}
                    <li class="nav__item"><a href="{% url 'leaderboard' %}" class="nav_link ">Dashboard
                    </a></li>
                    <li id="profiledropdown">
                      <div>
                        <img src="{{r.profile.url}}" alt="" class="profile">
                      </div>
                    </li>
                    <div class="userprofile" id="userprofile">
                      <div class="img">
                        <img src="{{r.profile.url}}" alt="" class="profile">
                        <div class="upload-img">
                          <p id="upload">+</p>
                        </div>
                      </div>
                      <h4>{{request.user}}</h4>
                      <p class="email">{{request.user.email}}</p>
                      <div class="button_container">
                        <a href="{% url 'account_logout' %}">Logout</a>
                      </div>
                    </div>
                    {% else%}
                    <li class="nav__item"><a href="{% url 'account_login' %}" class="nav_link">Login</a></li>
                    <li class="nav__item"><a href="{% url 'account_signup' %}" class="nav_link btn">Create an account</a></li>
                    {% endif %}
                </ul>
            </div>
            <ul class="nav__toogle" id="nav-toggle" >
                <i class='bx bxs-grid '></i>
            </ul>

        </nav>
        <div class="modal" id="popupmodal">
          <div class="modal-content" style="width: fit-content;">
              <form method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  <div class="button_container">
                      <input type="file" name="profile_upload" class="custom-file-input">
                      <button type="submit">Upload</button>
                  </div>
                </form>
                <i class='bx bx-x' id="closeUploadPopup"></i>

          </div>
    </header>
    <section class="ads">
        <div class="ad-silver">
            <div class="img">
                <img src="{% static 'img/logo-colour.d534143b.svg' %}" alt="">
            </div>
            <div class="description">
                <h2 class="data">Coca cola <span class="close"><i class='bx bx-x'></i></span></h2>
                <p class="desc">The essential app for every designer. Generate and collect beautiful color palettes on the go.</p>
                <a href="">Visit now</a>
            </div>
        </div>
    </section>
   <section class="leaderBoard">
     <h1>Leaderboard</h1>
     <div class="circles">
       <div class="profile-container">
         <img src="{{r.profile.url}}" alt="" class="w-80">
         <h1>{{r.user.username}}</h1>
         <h1 id="score"><i class='bx bx-coin-stack'> </i>{{r.score}}</h1>
       </div>
      </div>
      <div class="table">
          {% for r in result %}
        <div class="card" id = "{{r.user.username}}">
          <p class="rank"></p>
          <img src="{{r.profile.url}}" alt="" class="profile">
          <div class="user-info">
            <p class="name">{{r.user.username}}</p>
            <p class="score"><i class='bx bx-coin-stack'></i>{{r.score}}</p>
          </div>
        </div>
          {% endfor %}
       
        </div>
      </div>



   </section>
</body>
<script src="{% static 'JS/main.js' %}"></script>
<script>
  const dropdownBtn = document.getElementById("profiledropdown")
  const dropdown = document.getElementById("userprofile")
  dropdownBtn.addEventListener("click", function(){
    console.log("code works till this instance.")
    dropdown.classList.toggle("visibleprofile")
  })
  const userResult = document.querySelectorAll(".card")
  const userRank = document.querySelectorAll(".card .rank")
  console.log(userRank[0])
  console.log(userRank[1])
  console.log(userRank.length - (userRank.length - 1))

    for(x in userResult){
      if(userResult[x,0] == userResult[0]){
        userRank[0].classList.add("first")
        userRank[0].innerText = "1"
      }
      if(userResult[x,1] == userResult[1]){
        userRank[1].classList.add("second")
        userRank[1].innerText = "2"
      }
      if(userResult[x,2] == userResult[2]){
        userRank[2].classList.add("third")
        userRank[2].innerText = "3"
      }
    }
uploadImgBtn = document.querySelector("#upload")
console.log(uploadImgBtn)
popupModal = document.querySelector("#popupmodal")
closeUpload = document.querySelector("#closeUploadPopup")
console.log(popupModal)
uploadImgBtn.addEventListener("click", function(){
    popupModal.style.display = "block"
})
    closeUpload.addEventListener("click", function(){
      popupModal.style.display = "none"
  })
</script>
</html>